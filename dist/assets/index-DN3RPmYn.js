import{v as u,V as T,j as g,F as e}from"./uwal-C6J7qtYI.js";import{F as x}from"./f-NXDKetds.js";var f="struct VertexOutput{@builtin(position)position: vec4f,@location(0)textureCoord: vec2f};@group(0)@binding(0)var Sampler: sampler;@group(0)@binding(1)var Texture: texture_2d<f32>;@vertex fn vertex(@builtin(vertex_index)index: u32)->VertexOutput {var output: VertexOutput;var position=GetQuadCoord(index);position=(position+1)*0.5;output.position=vec4f(position,0.0,1.0);output.textureCoord=position;return output;}@fragment fn fragment(@location(0)textureCoord: vec2f)->@location(0)vec4f {return textureSample(Texture,Sampler,textureCoord);}";/**
 * @module Loading Images
 * @author Ustym Ukhman <ustym.ukhman@gmail.com>
 * @description This lesson is reproduced from WebGPU Loading Images into Textures
 * {@link https://webgpufundamentals.org/webgpu/lessons/webgpu-importing-textures.html}&nbsp;
 * and developed by using a version listed below. Please note that this code
 * may be simplified in future thanks to more recent library APIs.
 * @version 0.0.5
 * @license MIT
 */(async function(c){let r;try{r=new(await u.RenderPipeline(c,"Loading Images"))}catch(t){alert(t)}r.CreatePipeline({module:r.CreateShaderModule([T.Quad,f])});const i=r.CreateColorAttachment();i.clearValue=new g(5000268).rgba,r.CreatePassDescriptor(i);const o={addressModeU:e.ADDRESS.REPEAT,addressModeV:e.ADDRESS.REPEAT,magFilter:e.FILTER.LINEAR},d=[e.ADDRESS.REPEAT,e.ADDRESS.CLAMP],E=[e.FILTER.NEAREST,e.FILTER.LINEAR],a=new GUI;a.add(o,"addressModeU",d),a.add(o,"addressModeV",d),a.add(o,"magFilter",E),Object.assign(a.domElement.style,{left:"15px",right:""});const p=async t=>await n.CreateBitmapImage(await(await fetch(t)).blob(),{colorSpaceConversion:"none"}),n=new(await u.LegacyTexture()),l=await p(x),R=n.CopyImageToTexture(l,{flipY:!0,create:{usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,format:"rgba8unorm",mipmaps:!1}});for(let t=0;t<8;t++){const s=n.CreateSampler({addressModeU:t&1?e.ADDRESS.REPEAT:e.ADDRESS.CLAMP,addressModeV:t&2?e.ADDRESS.REPEAT:e.ADDRESS.CLAMP,magFilter:t&4?e.FILTER.LINEAR:e.FILTER.NEAREST});r.AddBindGroups(r.CreateBindGroup(r.CreateBindGroupEntries([s,R.createView()])))}function m(){const t=+(o.addressModeU===e.ADDRESS.REPEAT)*1+ +(o.addressModeV===e.ADDRESS.REPEAT)*2+ +(o.magFilter===e.FILTER.LINEAR)*4;r.SetActiveBindGroups(t),r.Render(6)}new ResizeObserver(t=>{for(const s of t){const{inlineSize:S,blockSize:A}=s.contentBoxSize[0];r.SetCanvasSize(S,A)}m()}).observe(document.body)})(document.getElementById("lesson"));
